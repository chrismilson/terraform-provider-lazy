---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "lazy_string Resource - terraform-provider-lazy"
subcategory: ""
description: |-
  Keep your previous value
---

# lazy_string (Resource)

This is a logical resource (like `null_resource`) that will maintain its previous value unless an explicit update value is specified.

## Example Usage (lazy variable)

If you have a terraform configuration that is deployed mostly by CI/CD, there may be input variables whose value is only known at runtime (like the digest of a container image built in the same deployment, for example). Having variables like this makes deploying the terraform manually difficult because a value will need to be supplied. 

If the intention of the runner is to use the previously set value for the variable, they may need to inspect the existing terraform state in order to find the existing value, and copy it into their manual command. In a break-glass situation, the error prone state download and subsequent value search, copy, and paste are unnecessary complications. By giving the input variable `default = null` and accompanying the variable definition with a `lazy_string` resource, it is possible to obtain the behaviour of retaining the previous value if no new value is set.

```terraform
variable "image_digest" {
  type    = string
  default = null
}

resource "lazy_string" "image_digest" {
  # Only used if "explicitly" is unset on the first run
  initially  = "sha256:200d1839f0645e5005181b6e6ebd46a040826dec2d6af9320b0f597ec9d27242"
  explicitly = var.image_digest
}
```

## Example Usage (create time value)

Sometimes it is valuable to set tags on resources that encode the context at the time they were created. Since no value will ever be set explicitly, it will retain its original value. One issue with this is that you will need to ensure the `lazy_string` is recreated whenever the dependent resource is, but this can be achieved with a combination of a `null_resource` and the `replace_triggered_by` lifecycle argument.

```terraform
resource "lazy_string" "created_by" {
  initially = data.example_user.current.arn

  lifecycle {
    # Ensures the tag will be updated whenever the sample_resource
    replace_triggered_by = [null_resource.example]
  }
}

resource "example_resource" "example" {
  ...
  tags = {
    created_by = lazy_string.created_by
  }
}

resource "null_resource" "example" {
  triggers = {
    id = example_resource.example.id
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `configurable_attribute` (String) Example configurable attribute
- `defaulted` (String) Example configurable attribute with default value

### Read-Only

- `id` (String) Example identifier


